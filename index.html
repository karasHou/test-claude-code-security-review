<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>简易 TodoList</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./styles.css" />
    <meta name="color-scheme" content="light" />
    <meta name="description" content="原生 HTML/CSS/JS + Tailwind 的简易 TodoList" />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%233b82f6'/%3E%3Cpath d='M30 52 l12 12 l28 -28' stroke='white' stroke-width='10' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"
    />
    <style>
      html {
        font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans',
          'Apple Color Emoji', 'Segoe UI Emoji';
      }
    </style>
    <script>
      tailwind.config = {
        theme: { extend: { boxShadow: { soft: '0 1px 2px rgba(16,24,40,.05), 0 1px 1px rgba(16,24,40,.06)' } } },
      };
    </script>
    <script defer src="./app.js"></script>
    <!-- 不使用构建工具，直接通过 CDN 使用 Tailwind -->
  </head>
  <body class="min-h-screen bg-gray-50 text-gray-800">
    <main class="max-w-xl mx-auto p-4">
      <h1 class="text-3xl font-bold text-center mb-6">TodoList</h1>

      <section class="bg-white rounded-xl shadow-soft ring-1 ring-gray-100">
        <div class="p-4 border-b border-gray-100 flex gap-2">
          <label for="todo-input" class="sr-only">新增待办</label>
          <input
            id="todo-input"
            type="text"
            placeholder="输入待办，回车或点击添加..."
            class="flex-1 px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500"
            autocomplete="off"
          />
          <button
            id="add-btn"
            class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 active:scale-[0.99]"
          >
            添加
          </button>
        </div>

        <ul id="todo-list" class="divide-y divide-gray-100 max-h-80 overflow-auto"></ul>

        <div class="p-4 flex flex-col sm:flex-row sm:items-center gap-3 justify-between">
          <div class="text-sm text-gray-600"><span id="left-count">0</span> 条未完成</div>
          <div class="flex items-center gap-2" role="tablist" aria-label="过滤">
            <button data-filter="all" class="filter-btn px-3 py-1.5 rounded-lg text-sm bg-gray-100 text-gray-700">
              全部
            </button>
            <button data-filter="active" class="filter-btn px-3 py-1.5 rounded-lg text-sm hover:bg-gray-100">
              未完成
            </button>
            <button data-filter="completed" class="filter-btn px-3 py-1.5 rounded-lg text-sm hover:bg-gray-100">
              已完成
            </button>
          </div>
          <button id="clear-completed" class="text-sm text-red-600 hover:text-red-700">清除已完成</button>
        </div>
      </section>

      <!-- XSS测试区域 - 故意不安全 -->
      <section class="bg-red-50 rounded-xl shadow-soft ring-1 ring-red-100 mt-4 p-4">
        <h2 class="text-lg font-semibold text-red-800 mb-3">XSS测试区域（不安全）</h2>
        <div class="flex gap-2 mb-3">
          <input
            id="xss-input"
            type="text"
            placeholder="输入HTML内容，如: <script>alert('XSS')</script>"
            class="flex-1 px-3 py-2 rounded-lg border border-red-200 focus:outline-none focus:ring-2 focus:ring-red-500"
            autocomplete="off"
          />
          <button
            id="xss-btn"
            class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 active:scale-[0.99]"
          >
            渲染HTML
          </button>
        </div>
        <div id="xss-output" class="min-h-[100px] p-3 bg-white rounded-lg border border-red-200">
          <p class="text-gray-500">渲染结果将显示在这里...</p>
        </div>
        
        <!-- 极度危险的JavaScript执行区域 -->
        <div class="mt-4 p-3 bg-red-100 rounded-lg border border-red-300">
          <h3 class="text-md font-semibold text-red-900 mb-2">JavaScript执行区域（极度危险）</h3>
          <div class="flex gap-2 mb-2">
            <input
              id="js-input"
              type="text"
              placeholder="输入JavaScript代码，如: alert('危险代码')"
              class="flex-1 px-3 py-2 rounded-lg border border-red-300 focus:outline-none focus:ring-2 focus:ring-red-500"
              autocomplete="off"
            />
            <button
              id="js-btn"
              class="px-4 py-2 rounded-lg bg-red-800 text-white hover:bg-red-900 active:scale-[0.99]"
            >
              执行JS
            </button>
          </div>
          <p class="text-xs text-red-700">⚠️ 警告：此功能会直接执行用户输入的JavaScript代码，存在严重安全风险！</p>
        </div>
      </section>
    </main>
  </body>
</html>
